{"version":3,"sources":["plugins/routes.js"],"names":[],"mappings":"AAAA,YAAY,CAAC;;;;;;;;wBAEQ,WAAW;;;;4BACV,kBAAkB;;AAExC,IAAM,QAAQ,GAAG,SAAX,QAAQ,CAAI,MAAM,EAAE,OAAO,EAAE,IAAI,EAAK;AAC1C,MAAI,MAAM,GAAG,EAAE,CAAC;AAChB,MAAM,QAAQ,GAAG,SAAX,QAAQ,CAAG,IAAI;WAAI,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC;GAAA,CAAC;;AAE1D,6BAAS,OAAO,CAAC,MAAM,CAAC,aAAa,EAAE,EAAC,MAAM,EAAE,QAAQ,EAAC,CAAC,CACvD,OAAO,CAAC,UAAA,KAAK,EAAI;AAChB,QAAM,WAAW,GAAG;AAClB,cAAQ,EAAE,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC;AAC7B,aAAO,EAAE;AACP,cAAM,EAAE,OAAO,CAAC,MAAM;OACvB;AACD,YAAM,EAAE;AACN,cAAM,EAAE,OAAO,CAAC,MAAM,CAAC,UAAU;OAClC;KACF,CAAC;AACF,UAAM,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;GAC1B,CAAC,CAAC;AACL,QAAM,CAAC,QAAQ,CAAC,MAAM,EAAE,UAAA,GAAG,EAAI;AAC7B,QAAI,CAAC,GAAG,CAAC,CAAC;GACX,CAAC,CAAC;CACJ,CAAC;;AAEF,QAAQ,CAAC,UAAU,GAAG;AACpB,MAAI,EAAE,QAAQ;AACd,SAAO,EAAE,4BAAS;CACnB,CAAC;;qBAEa,QAAQ","file":"routes.js","sourcesContent":["'use strict';\n\nimport klawSync from 'klaw-sync';\nimport {version} from '../utils/package';\n\nconst register = (server, options, next) => {\n  let routes = [];\n  const filterFn = item => item.path.endsWith('-routes.js');\n\n  klawSync(options.config.routesBaseDir, {filter: filterFn})\n    .forEach(route => {\n      const routeObject = {\n        register: require(route.path),\n        options: {\n          config: options.config\n        },\n        routes: {\n          prefix: options.config.routesPath\n        }\n      };\n      routes.push(routeObject);\n    });\n  server.register(routes, err => {\n    next(err);\n  });\n};\n\nregister.attributes = {\n  name: 'routes',\n  version: version()\n};\n\nexport default register;\n"]}